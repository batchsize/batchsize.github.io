
```bash
ç¼–è¯‘opencv
cv::getBuildInformation() æŸ¥çœ‹opencv ç¼–è¯‘æ˜¯å¦æ”¯æŒffmpeg
git clone --branch 2.4 --depth 1 https://github.com/opencv/opencv.git

ç¼–è¯‘ffpmeg
git clone --branch release/4.3 --depth 1 https://github.com/FFmpeg/FFmpeg.git


ç¼–è¯‘h264
git clone https://code.videolan.org/videolan/x264.git
```
build_x264.sh
```bash
#!/bin/bash
 
# è®¾ç½®å·¥å…·é“¾è·¯å¾„
TOOLCHAIN_PATH=/root/tools/toolchains/gcc-arm-8.3-2019.03-x86_64-arm-linux-gnueabihf
GCC_COMPILER=${TOOLCHAIN_PATH}/bin/arm-linux-gnueabihf
 
# è®¾ç½®x264å®‰è£…è·¯å¾„
X264_INSTALL_DIR=/root/tools/3rdparty/install/x264
 
 
 
# é…ç½®äº¤å‰ç¼–è¯‘é€‰é¡¹ï¼Œç›´æ¥æŒ‡å®š C å’Œ C++ ç¼–è¯‘å™¨
./configure --prefix=${X264_INSTALL_DIR} \
            --cross-prefix=${GCC_COMPILER}- \
            --cc=${GCC_COMPILER}-gcc \
            --cxx=${GCC_COMPILER}-g++ \
            --host=arm-linux \
            --enable-cross-compile \
            --enable-shared \
            --disable-static \
            --enable-pic \
            --extra-cflags="-g -I${TOOLCHAIN_PATH}/include" \
            --extra-ldflags="-L${TOOLCHAIN_PATH}/lib"
 
 
# ç¼–è¯‘å¹¶å®‰è£…x264
make -j$(nproc)
make install
```
 

build_ffmpeg.sh
```bash
#!/bin/bash
 
# è®¾ç½®å·¥å…·é“¾è·¯å¾„
TOOLCHAIN_PATH=/root/tools/toolchains/gcc-arm-8.3-2019.03-x86_64-arm-linux-gnueabihf
GCC_COMPILER=${TOOLCHAIN_PATH}/bin/arm-linux-gnueabihf
X264_INSTALL_DIR=/root/tools/3rdparty/install/x264
# è®¾ç½®FFmpegå®‰è£…è·¯å¾„
FFMPEG_INSTALL_DIR=/root/tools/3rdparty/install/ffmpeg
 
 
# é…ç½®äº¤å‰ç¼–è¯‘é€‰é¡¹ï¼Œç›´æ¥æŒ‡å®š C å’Œ C++ ç¼–è¯‘å™¨
./configure --prefix=${FFMPEG_INSTALL_DIR} \
            --cc=${GCC_COMPILER}-gcc \
            --cxx=${GCC_COMPILER}-g++ \
            --target-os=linux \
            --arch=arm \
            --enable-cross-compile \
            --enable-shared \
            --disable-static \
            --disable-debug \
            --disable-doc \
            --enable-gpl \
            --enable-libx264 \
            --enable-pic \
            --extra-cflags="-I${X264_INSTALL_DIR}/include -I${TOOLCHAIN_PATH}/include" \
            --extra-ldflags="-L${X264_INSTALL_DIR}/lib -L${TOOLCHAIN_PATH}/lib" \
            --strip=${GCC_COMPILER}-strip
 
# ç¼–è¯‘å¹¶å®‰è£…FFmpeg
make -j$(nproc)
make install
 
# æ¸…ç†
# cd ..
# rm -rf ffmpeg-${FFMPEG_VERSION}
# rm ffmpeg-${FFMPEG_VERSION}.tar.bz2
 
echo "FFmpeg has been installed in ${FFMPEG_INSTALL_DIR}"
æŠ¥é”™libavcodec/libx264.c:282:9: error: â€˜x264_bit_depthâ€™ undeclared
è§£å†³:æ›¿æ¢x264_bit_depthä¸º X264_BIT_DEPTH 0 ç¼–è¯‘é€šè¿‡
```

opencv_build.sh
```bash
#!/bin/bash
 
set -e
 
# è®¾ç½®å·¥å…·é“¾è·¯å¾„
export TOOLCHAIN_PATH=/root/tools/toolchains/gcc-arm-8.3-2019.03-x86_64-arm-linux-gnueabihf
export GCC_COMPILER=${TOOLCHAIN_PATH}/bin/arm-linux-gnueabihf
 
 
# æ¸…ç†å¹¶åˆ›å»ºæ„å»ºç›®å½•
rm -rf build
mkdir build
cd build
# å¤‡ä»½åŸå§‹è·¯å¾„
export ORIGINAL_LD_LIBRARY_PATH=$LD_LIBRARY_PATH
export ORIGINAL_PATH=$PATH
 
# ä¸´æ—¶ç§»é™¤Anacondaè·¯å¾„
export LD_LIBRARY_PATH=$(echo $LD_LIBRARY_PATH | tr ':' '\n' | grep -v 'anaconda' | tr '\n' ':' | sed 's/:$//')
export PATH=$(echo $PATH | tr ':' '\n' | grep -v 'anaconda' | tr '\n' ':' | sed 's/:$//')
 
 
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/root/tools/3rdparty/install/ffmpeg/lib/pkgconfig
 
# é…ç½®äº¤å‰ç¼–è¯‘é€‰é¡¹
cmake -DCMAKE_BUILD_TYPE=RELEASE \
      -DCMAKE_SYSTEM_NAME=Linux \
      -DCMAKE_SYSTEM_PROCESSOR=arm \
      -DCMAKE_C_COMPILER=${GCC_COMPILER}-gcc \
      -DCMAKE_CXX_COMPILER=${GCC_COMPILER}-g++ \
      -DCMAKE_FIND_ROOT_PATH=${TOOLCHAIN_PATH} \
      -DCMAKE_FIND_ROOT_PATH_MODE_PROGRAM=NEVER \
      -DCMAKE_FIND_ROOT_PATH_MODE_LIBRARY=ONLY \
      -DCMAKE_FIND_ROOT_PATH_MODE_INCLUDE=ONLY \
      -DBUILD_SHARED_LIBS=ON \
      -DWITH_FFMPEG=ON \
      -DFFMPEG_INCLUDE_DIRS=/root/tools/3rdparty/install/ffmpeg/include \
      -DWITH_1394=OFF \
      -DWITH_GTK=OFF \
      -DWITH_FREETYPE=OFF \
      -DWITH_HARFBUZZ=OFF \
      -DBUILD_opencv_freetype=OFF \
      -DBUILD_opencv_highgui=OFF \
      -DCMAKE_INSTALL_PREFIX=/root/tools/3rdparty/install/opencv2.4 \
      ../
 
# æ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº†Makefile
if [ ! -f "Makefile" ]; then
  echo "CMake configuration failed. Makefile not found."
  exit 1
fi
 
# æ„å»ºå’Œå®‰è£…
make -j$(nproc) 2>&1 | tee make_output.log
if [ $? -ne 0 ]; then
  echo "Make failed. Check make_output.log for details."
  exit 1
fi
 
make install 2>&1 | tee make_install_output.log
if [ $? -ne 0 ]; then
  echo "Make install failed. Check make_install_output.log for details."
  exit 1
fi
 
# echo "OpenCV has been successfully built and installed with FFmpeg and x264 support."
# è¿˜åŸLD_LIBRARY_PATHå’ŒPATH
export LD_LIBRARY_PATH=$ORIGINAL_LD_LIBRARY_PATH
export PATH=$ORIGINAL_PATH


cmake -DCMAKE_BUILD_TYPE=RELEASE       -DCMAKE_SYSTEM_NAME=Linux       -DCMAKE_SYSTEM_PROCESSOR=arm       -DCMAKE_C_COMPILER=${GCC_COMPILER}-gcc       -DCMAKE_CXX_COMPILER=${GCC_COMPILER}-g++       -DCMAKE_FIND_ROOT_PATH=${TOOLCHAIN_PATH}       -DCMAKE_FIND_ROOT_PATH_MODE_PROGRAM=NEVER       -DCMAKE_FIND_ROOT_PATH_MODE_LIBRARY=ONLY       -DCMAKE_FIND_ROOT_PATH_MODE_INCLUDE=ONLY       -DBUILD_SHARED_LIBS=ON       -DWITH_FFMPEG=ON       -DFFMPEG_INCLUDE_DIRS=/root/tools/3rdparty/install/ffmpeg/include       -DWITH_1394=OFF       -DWITH_GTK=OFF       -DBUILD_opencv_ml=OFF       -DCMAKE_INSTALL_PREFIX=/root/tools/3rdparty/install/opencv_new  -DFFMPEG_DIR= /root/tools/3rdparty/install/ffmpeg -DCMAKE_LIBRARY_PATH=/root/tools/3rdparty/install/ffmpeg/lib  -DCMAKE_INCLUDE_PATH=/root/tools/3rdparty/install/ffmpeg/include   -DWITH_FREETYPE=OFF -DWITH_HARFBUZZ=OFF -DBUILD_opencv_freetype=OFF -D WITH_OPENCL=OFF  ..
```


 CPACK_PACKAGE_VERSION does not match version provided by version.hpp
åœ¨opencv-2.4.13.6\modules\core\include\opencv2\coreæ‰“å¼€version.hppæ–‡ä»¶
ç„¶ååœ¨opencv-2.4.13.6\cmakeæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€OpenCVPackaging.cmakeæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç set(OPENCV_VCSVERSION "2.4.13.6")ï¼Œæ­¤å¤„æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹OpenCVç‰ˆæœ¬å·ï¼Œç„¶åCMakeç¼–è¯‘é€šè¿‡ï¼ï¼


DMA (Direct Memory Access) å†…å­˜ æ˜¯ä¸€ç§å…è®¸å¤–è®¾ï¼ˆä¾‹å¦‚ç¡¬ç›˜ã€ç½‘ç»œé€‚é…å™¨ã€éŸ³é¢‘/è§†é¢‘è®¾å¤‡ç­‰ï¼‰ç›´æ¥è®¿é—®ç³»ç»Ÿå†…å­˜ï¼ˆRAMï¼‰è€Œä¸ç»è¿‡ CPU çš„æŠ€æœ¯ã€‚é€šè¿‡ DMAï¼Œå¤–è®¾å¯ä»¥ç›´æ¥å°†æ•°æ®è¯»å†™åˆ°å†…å­˜ä¸­ï¼Œä»è€Œå‡å°‘ CPU çš„è´Ÿæ‹…ï¼Œæé«˜æ•°æ®ä¼ è¾“æ•ˆç‡ã€‚


```bash
è¦äº¤å‰ç¼–è¯‘ FFmpeg åœ¨ ARM æ¶æ„ä¸Šå¹¶ä¸”æ”¯æŒ H.264 ç¼–è§£ç ï¼Œä½ éœ€è¦è¿›è¡Œä¸€ç³»åˆ—æ­¥éª¤ï¼ŒåŒ…æ‹¬å‡†å¤‡äº¤å‰ç¼–è¯‘å·¥å…·é“¾ã€ä¸‹è½½ FFmpeg æºç ã€é…ç½®ç¼–è¯‘é€‰é¡¹å¹¶ç¡®ä¿å¯ç”¨ H.264 ç¼–è§£ç æ”¯æŒã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤ã€‚
# å‰ææ¡ä»¶ï¼š
- äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼šä½ éœ€è¦ä½¿ç”¨é’ˆå¯¹ ARM æ¶æ„çš„äº¤å‰ç¼–è¯‘å™¨ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ arm-linux-gnueabihf-gcc å·¥å…·é“¾ã€‚
- æ”¯æŒ H.264 ç¼–è§£ç ï¼šH.264 ç¼–è§£ç ä¾èµ–äº x264 åº“ï¼Œå®ƒæ˜¯ FFmpeg æ”¯æŒ H.264 çš„å¸¸ç”¨åº“ã€‚
# æ­¥éª¤ 1ï¼šå‡†å¤‡äº¤å‰ç¼–è¯‘ç¯å¢ƒ
1. å®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·é“¾ å¦‚æœä½ æ²¡æœ‰å®‰è£…äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…å®ƒï¼š
sudo apt-get update
sudo apt-get install gcc-arm-linux-gnueabihf
1. ç¡®ä¿ä½ å®‰è£…äº†é€‚åˆ ARM ç›®æ ‡æ¶æ„çš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾ã€‚
2. å®‰è£…å…¶ä»–å¿…è¦çš„å·¥å…·ï¼š å®‰è£…äº¤å‰ç¼–è¯‘æ‰€éœ€çš„å·¥å…·å’Œä¾èµ–é¡¹ï¼š
sudo apt-get install make pkg-config yasm
# æ­¥éª¤ 2ï¼šè·å– FFmpeg æºç 
ä½ å¯ä»¥ä» FFmpeg å®˜æ–¹ Git ä»“åº“å…‹éš†æœ€æ–°çš„æºä»£ç ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ç¨³å®šçš„ç‰ˆæœ¬ã€‚
1. å…‹éš† FFmpeg æºä»£ç ï¼š
git clone https://github.com/FFmpeg/FFmpeg.git
cd FFmpeg
1. æˆ–è€…ï¼Œä¸‹è½½ FFmpeg çš„å‘å¸ƒç‰ˆæœ¬ï¼š è®¿é—® FFmpeg Releases é¡µé¢ï¼Œé€‰æ‹©é€‚åˆçš„ç‰ˆæœ¬å¹¶ä¸‹è½½ã€‚
# æ­¥éª¤ 3ï¼šäº¤å‰ç¼–è¯‘ x264ï¼ˆç”¨äº H.264 ç¼–è§£ç ï¼‰
FFmpeg æ”¯æŒ H.264 ç¼–è§£ç çš„åŠŸèƒ½é€šå¸¸éœ€è¦ä¾èµ–äº x264 åº“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦äº¤å‰ç¼–è¯‘ x264 åº“å¹¶è®© FFmpeg ä½¿ç”¨å®ƒã€‚
1. è·å– x264 æºä»£ç ï¼š ä½ å¯ä»¥ä» x264 çš„å®˜æ–¹ç½‘ç«™æˆ– Git ä»“åº“ä¸‹è½½æºç ã€‚
git clone https://code.videolan.org/videolan/x264.git
cd x264
1. é…ç½®å’Œç¼–è¯‘ x264ï¼š åœ¨é…ç½® x264 æ—¶ï¼Œä½ éœ€è¦æŒ‡å®šäº¤å‰ç¼–è¯‘å·¥å…·é“¾çš„è·¯å¾„ã€‚
./configure --host=arm-linux --prefix=/path/to/installation/directory --enable-shared
make -j$(nproc)
make install
  - --prefix é€‰é¡¹æŒ‡å®šå®‰è£…è·¯å¾„ï¼Œé€šå¸¸é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç›®å½•ï¼Œå¦‚ /path/to/installation/directoryã€‚
  - --enable-shared é€‰é¡¹å¯ç”¨å…±äº«åº“ï¼Œä»¥ä¾¿ FFmpeg ä½¿ç”¨ã€‚
# æ­¥éª¤ 4ï¼šäº¤å‰ç¼–è¯‘ FFmpeg
1. è¿›å…¥ FFmpeg æºç ç›®å½•ï¼š
cd FFmpeg
1. é…ç½®ç¼–è¯‘é€‰é¡¹ï¼š ä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾é…ç½® FFmpegã€‚åœ¨é…ç½®è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ FFmpeg ä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼Œå¹¶å¯ç”¨å¯¹ H.264 çš„æ”¯æŒï¼ˆå³ä½¿ç”¨ x264 åº“ï¼‰ã€‚
./configure \
    --prefix=/path/to/installation/directory \
    --cross-prefix=arm-linux-gnueabihf- \
    --arch=arm \
    --target-os=linux \
    --enable-cross-compile \
    --enable-shared \
    --enable-gpl \
    --enable-libx264 \
    --disable-debug \
    --disable-doc \
    --enable-pic
1. ä¸»è¦å‚æ•°ï¼š
  - --prefixï¼šæŒ‡å®šå®‰è£…ç›®å½•ã€‚
  - --cross-prefixï¼šæŒ‡å®šäº¤å‰ç¼–è¯‘å·¥å…·é“¾çš„å‰ç¼€ï¼ˆæ ¹æ®ä½ çš„å·¥å…·é“¾ä¿®æ”¹ï¼‰ã€‚
  - --arch=armï¼šç›®æ ‡æ¶æ„æ˜¯ ARMã€‚
  - --target-os=linuxï¼šç›®æ ‡æ“ä½œç³»ç»Ÿæ˜¯ Linuxã€‚
  - --enable-libx264ï¼šå¯ç”¨å¯¹ x264 çš„æ”¯æŒï¼ˆå³ H.264 ç¼–è§£ç ï¼‰ã€‚
  - --enable-sharedï¼šå¯ç”¨å…±äº«åº“ã€‚
  - --disable-debugï¼šç¦ç”¨è°ƒè¯•ä¿¡æ¯ï¼Œé€šå¸¸å¯ä»¥åŠ é€Ÿç¼–è¯‘è¿‡ç¨‹ã€‚
2. ç¼–è¯‘ FFmpegï¼š é…ç½®å®Œæˆåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘ FFmpegã€‚
make -j$(nproc)
1. -j$(nproc) ä¼šæ ¹æ®ä½ æœºå™¨çš„å¤„ç†å™¨æ ¸å¿ƒæ•°æ¥å¹¶è¡Œç¼–è¯‘ï¼Œæå‡ç¼–è¯‘é€Ÿåº¦ã€‚
2. å®‰è£… FFmpegï¼š ç¼–è¯‘å®Œæˆåï¼Œå®‰è£… FFmpegã€‚
make install
# æ­¥éª¤ 5ï¼šéªŒè¯ FFmpeg æ˜¯å¦æ”¯æŒ H.264
å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥åœ¨ ARM è®¾å¤‡ä¸Šè¿è¡Œ FFmpeg å¹¶æ£€æŸ¥æ˜¯å¦æ”¯æŒ H.264 ç¼–è§£ç ã€‚
ffmpeg -codecs | grep h264
å¦‚æœè¾“å‡ºä¸­æœ‰ h264 ç¼–è§£ç å™¨ï¼Œè¡¨ç¤º H.264 æ”¯æŒå·²ç»æˆåŠŸå¯ç”¨ã€‚
# å°ç»“ï¼š
- ä½ éœ€è¦ä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼ˆå¦‚ arm-linux-gnueabihf-ï¼‰æ¥ç¼–è¯‘ FFmpeg å’Œ x264ã€‚
- é…ç½® FFmpeg å’Œ x264 æ—¶ï¼Œç¡®ä¿å¯ç”¨ H.264 æ”¯æŒï¼ˆä½¿ç”¨ --enable-libx264ï¼‰ã€‚
- ç¼–è¯‘æ—¶ä½¿ç”¨é€‚å½“çš„äº¤å‰ç¼–è¯‘é€‰é¡¹ï¼Œç¡®ä¿æœ€ç»ˆå¯åœ¨ ARM è®¾å¤‡ä¸Šè¿è¡Œã€‚
```


# cmake ç¼–è¯‘opencv
```bash

cmake -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=./install \
      -DWITH_CUDA=OFF \
      -DWITH_OPENCL=OFF \
      -DWITH_IPP=OFF \
      -DWITH_TBB=OFF \
      -DBUILD_opencv_python3=OFF \
      -DBUILD_opencv_python2=OFF \
      -DBUILD_opencv_java=OFF \
      -DBUILD_opencv_xfeatures2d=OFF \
      -DBUILD_opencv_cudafeatures2d=OFF \
      -DBUILD_opencv_cudaarithm=OFF \
      -DBUILD_opencv_cudawarping=OFF \
      -DBUILD_opencv_cudabgsegm=OFF \
      -DBUILD_opencv_cudaoptflow=OFF \
      -DBUILD_opencv_stitching=ON \
      -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules ..

```

# sdk
```bash


```



```
# äº¤å‰ç¼–è¯‘aarch64

cmake \
-DCMAKE_SYSTEM_NAME=Linux \
-DCMAKE_SYSTEM_PROCESSOR=aarch64 \
-DCMAKE_C_COMPILER=/home/work/tools/toolchain/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc \
-DCMAKE_CXX_COMPILER=/home/work/tools/toolchain/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-g++ \
-DCMAKE_FIND_ROOT_PATH=/home/work/tools/toolchain/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu \
-DCMAKE_FIND_ROOT_PATH_MODE_PROGRAM=NEVER \
-DCMAKE_FIND_ROOT_PATH_MODE_LIBRARY=ONLY \
-DCMAKE_FIND_ROOT_PATH_MODE_INCLUDE=ONLY \
-DBUILD_opencv_gpu=OFF \
-DBUILD_SHARED_LIBS=ON \
-DWITH_GTK=OFF \
-DWITH_JPEG=ON \
-DWITH_PNG=ON \
-DWITH_TIFF=ON \
-DWITH_JASPER=ON \
-DWITH_OPENEXR=OFF \
-DWITH_TBB=OFF \
-DWITH_1394=OFF \
-DWITH_FFMPEG=OFF \
-DWITH_GSTREAMER=OFF \
-DBUILD_TESTS=OFF \
-DBUILD_PERF_TESTS=OFF \
-DBUILD_EXAMPLES=OFF \
-DBUILD_DOCS=OFF \
-DBUILD_opencv_apps=OFF \
-DBUILD_opencv_calib3d=ON \
-DBUILD_opencv_contrib=OFF \
-DBUILD_opencv_core=ON \
-DBUILD_opencv_features2d=ON \
-DBUILD_opencv_flann=ON \
-DBUILD_opencv_highgui=OFF \
-DBUILD_opencv_imgproc=ON \
-DBUILD_opencv_legacy=OFF \
-DBUILD_opencv_ml=ON \
-DBUILD_opencv_objdetect=ON \
-DBUILD_opencv_video=ON \
-DCMAKE_INSTALL_PREFIX=./install \
..

```



### zmq ç¼–è¯‘

```
wget https://github.com/zeromq/libzmq/releases/download/v4.3.4/zeromq-4.3.4.tar.gz
tar -xzf zeromq-4.3.4.tar.gz
cd zeromq-4.3.4

# å·¥å…·é“¾å‰ç¼€ï¼ˆä¸å« -gccï¼‰
export TOOLCHAIN_DIR=/home/work/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin
export CROSS_PREFIX=${TOOLCHAIN_DIR}/aarch64-none-linux-gnu

export CC=${CROSS_PREFIX}-gcc
export CXX=${CROSS_PREFIX}-g++
export LD=${CROSS_PREFIX}-ld
export AR=${CROSS_PREFIX}-ar
export AS=${CROSS_PREFIX}-as
export STRIP=${CROSS_PREFIX}-strip
export RANLIB=${CROSS_PREFIX}-ranlib

# ç”Ÿæˆ configure è„šæœ¬
./autogen.sh

./configure \
  --host=aarch64-none-linux-gnu \
  --prefix=$(pwd)/install \
  --enable-shared \
  --disable-static

make -j$(nproc)
make install

file install/lib/libzmq.so.5  // libzmq.so.5: ELF 64-bit LSB shared object, ARM aarch64, ...

$STRIP install/lib/libzmq.so.5

cp libzmq.so.5.2.4 libzmq.so.5 // åªä¿ç•™libzmq.so.5

æ‰“åŒ…è„šæœ¬
#!/bin/bash

# è®¾ç½®è·¯å¾„ï¼ˆä½ è‡ªå·±çš„ ZeroMQ å®‰è£…ç›®å½•ï¼‰
INSTALL_DIR=$(pwd)/install
OUTPUT_TAR=zeromq-4.3.4-arm64.tar.gz

# æ£€æŸ¥å¿…è¦æ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f "$INSTALL_DIR/lib/libzmq.so.5.2.4" ]; then
  echo "Error: libzmq.so.5.2.4 not found in $INSTALL_DIR/lib"
  exit 1
fi

# åˆ›å»ºæ‰“åŒ…ä¸´æ—¶ç›®å½•
PKG_DIR=zeromq-arm64-package
rm -rf $PKG_DIR
mkdir -p $PKG_DIR/lib
mkdir -p $PKG_DIR/include

# æ‹·è´å¹¶é‡å‘½ååº“æ–‡ä»¶
cp $INSTALL_DIR/lib/libzmq.so.5.2.4 $PKG_DIR/lib/libzmq.so.5

# å¯é€‰ï¼šstrip ç²¾ç®€åº“ä½“ç§¯ï¼ˆæ ¹æ®ä½ çš„å·¥å…·é“¾ä¿®æ”¹è·¯å¾„ï¼‰
STRIP_TOOL=/home/work/tools/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-strip
$STRIP_TOOL $PKG_DIR/lib/libzmq.so.5

# æ‹·è´å¤´æ–‡ä»¶
cp -r $INSTALL_DIR/include/zmq $PKG_DIR/include/

# æ‰“åŒ…ä¸º .tar.gz
tar -czf $OUTPUT_TAR -C $PKG_DIR .

# æ¸…ç†ä¸´æ—¶ç›®å½•
rm -rf $PKG_DIR

echo "âœ… æ‰“åŒ…å®Œæˆ: $OUTPUT_TAR"



zmq.hpp æ˜¯ ZeroMQ çš„ C++ ç»‘å®šå¤´æ–‡ä»¶ï¼Œä½†å®ƒ ä¸æ˜¯ ZeroMQ æºç çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ ä¸ä¼šéšç€ libzmq çš„äº¤å‰ç¼–è¯‘è‡ªåŠ¨ç”Ÿæˆæˆ–å®‰è£…ã€‚

wget https://raw.githubusercontent.com/zeromq/cppzmq/master/zmq.hpp -O zmq.hpp
cp zmq.hpp /path/to/libzmq/install/include/
```


### yaml

```
git clone https://github.com/jbeder/yaml-cpp.git
cd yaml-cpp
git checkout yaml-cpp-0.7.0


# toolchains/rv1126-aarch64.cmake

# 1. æŒ‡å®šç³»ç»Ÿå¹³å°
set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_PROCESSOR aarch64)

# 2. æŒ‡å®šäº¤å‰ç¼–è¯‘å·¥å…·é“¾å‰ç¼€
set(TOOLCHAIN_PATH "/home/work/tools/rv1126b/RV1126B-SDK/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu")
set(CROSS_COMPILE "${TOOLCHAIN_PATH}/bin/aarch64-none-linux-gnu")

# 3. è®¾ç½® C/C++ ç¼–è¯‘å™¨
set(CMAKE_C_COMPILER ${CROSS_COMPILE}-gcc)
set(CMAKE_CXX_COMPILER ${CROSS_COMPILE}-g++)

# 4. è®¾ç½®å®‰è£…å‰ç¼€è·¯å¾„ï¼ˆä½ å¯ä»¥æŒ‰éœ€ä¿®æ”¹ï¼‰
set(CMAKE_INSTALL_PREFIX "${CMAKE_CURRENT_LIST_DIR}/../build-aarch64/install" CACHE PATH "Installation path" FORCE)

# 5. ä¼˜å…ˆæœç´¢ç›®æ ‡å¹³å°çš„å¤´æ–‡ä»¶å’Œåº“ï¼ˆè€Œéå®¿ä¸»ï¼‰
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)



cmake .. \
  -DCMAKE_TOOLCHAIN_FILE=../toolchains/rv1126-aarch64.cmake \
  -DCMAKE_INSTALL_PREFIX=$(pwd)/install \
  -DBUILD_SHARED_LIBS=ON \
  -DYAML_CPP_BUILD_TESTS=OFF
(
æˆ–# æ·»åŠ è¿™ä¸€è¡Œåˆ° toolchains/rv1126-aarch64.cmake
set(CMAKE_INSTALL_PREFIX "${CMAKE_CURRENT_LIST_DIR}/../build-aarch64/install" CACHE PATH "Installation path" FORCE)
)

æ‰“åŒ…è„šæœ¬

#!/bin/bash
cd "$(dirname "$0")"

PKG_NAME="yaml-cpp-0.7.0-arm64"
INSTALL_DIR="./install"
STRIP_TOOL="/home/work/tools/rv1126b/RV1126B-SDK/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-strip"

# Strip .so
$STRIP_TOOL $INSTALL_DIR/lib/libyaml-cpp.so.0.7

# ç”Ÿæˆå‹ç¼©åŒ…
tar -czf ${PKG_NAME}.tar.gz -C $INSTALL_DIR .

echo "âœ… æ‰“åŒ…å®Œæˆ: ${PKG_NAME}.tar.gz"


```


### ç¼–è¯‘ libcrypto.so.1.1

```
wget https://www.openssl.org/source/openssl-1.1.1w.tar.gz
tar -xf openssl-1.1.1w.tar.gz

make clean
make distclean

export TOOLCHAIN_PATH=/home/work/tools/rv1126b/RV1126B-SDK/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu
export PATH=$TOOLCHAIN_PATH/bin:$PATH
export CROSS_COMPILE=aarch64-none-linux-gnu-

which ${CROSS_COMPILE}gcc


./Configure linux-aarch64 \
  --cross-compile-prefix=${CROSS_COMPILE} \
  --prefix=$(pwd)/install \
  no-tests no-ssl2 no-ssl3 no-comp no-hw no-engine

make -j$(nproc)
make install_sw
```


```
ğŸ”§ make clean
åˆ é™¤ å¤§éƒ¨åˆ† ç¼–è¯‘ä¸­é—´æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

.o ç›®æ ‡æ–‡ä»¶

.loã€.la ç­‰ä¸´æ—¶é“¾æ¥æ–‡ä»¶

éƒ¨åˆ†ä¸­é—´åº“

ä¸ä¼šåˆ é™¤ä½ é…ç½®ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå¦‚ Makefileï¼‰

âœ… ç”¨äºï¼šè½»é‡æ¸…ç†ã€é‡æ–°ç¼–è¯‘

ğŸ”¥ make distclean
åˆ é™¤ æ‰€æœ‰ ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶å’Œé…ç½®ç»“æœï¼ŒåŒ…æ‹¬ï¼š

make clean åˆ é™¤çš„å†…å®¹

Makefile

configdata.pm

include/openssl/opensslconf.h ç­‰è‡ªåŠ¨ç”Ÿæˆå¤´æ–‡ä»¶

ä¼šè®©ä½ æ¢å¤åˆ°æœ€åˆè§£å‹æºç åçš„çŠ¶æ€

âœ… ç”¨äºï¼šå½»åº•æ¸…ç†ã€å‡†å¤‡é‡æ–°é…ç½®ï¼ˆå¦‚ ./Configure æ”¹é”™ï¼‰

ğŸ§  æ€»ç»“å¯¹æ¯”ï¼š
å‘½ä»¤	åˆ é™¤ä¸­é—´æ–‡ä»¶	åˆ é™¤é…ç½®æ–‡ä»¶	é€‚ç”¨åœºæ™¯
make clean	âœ…	âŒ	ä¿®æ”¹æºç åé‡æ–°ç¼–è¯‘
make distclean	âœ…	âœ…	ä¿®æ”¹äº¤å‰ç¼–è¯‘å‚æ•°/è·¯å¾„/é…ç½®åé‡æ–°å¼€å§‹

```


## libcurl
```
wget https://curl.se/download/curl-7.79.1.tar.gz
tar xf curl-7.79.1.tar.gz

export TOOLCHAIN=/home/work/tools/rv1126b/RV1126B-SDK/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu

export CROSS_PREFIX=aarch64-none-linux-gnu
export SYSROOT=$TOOLCHAIN/aarch64-none-linux-gnu/libc

export CC=$TOOLCHAIN/bin/${CROSS_PREFIX}-gcc
export CXX=$TOOLCHAIN/bin/${CROSS_PREFIX}-g++
export AR=$TOOLCHAIN/bin/${CROSS_PREFIX}-ar
export RANLIB=$TOOLCHAIN/bin/${CROSS_PREFIX}-ranlib
export LD=$TOOLCHAIN/bin/${CROSS_PREFIX}-ld
export STRIP=$TOOLCHAIN/bin/${CROSS_PREFIX}-strip


./configure \
    --host=aarch64-none-linux-gnu \
    --with-sysroot=$SYSROOT \
    --prefix=$(pwd)/install \
    --disable-shared \
    --enable-static \
    --with-ssl=/home/work/tools/rv1126b/tool_rv1126b/openssl-1.1.1w/install \
    CFLAGS="-fPIC" CXXFLAGS="-fPIC" \
    CC=$CC

make -j$(nproc)
make install

--host	æŒ‡å®šäº¤å‰ç¼–è¯‘ç›®æ ‡æ¶æ„
--with-sysroot	ä½¿ç”¨ sysroot æ ¹è·¯å¾„
--prefix	å®‰è£…è·¯å¾„
--with-ssl=PATH	æŒ‡å®šäº¤å‰ç¼–è¯‘å¥½çš„ OpenSSL è·¯å¾„
--enable-shared	æ„å»ºåŠ¨æ€åº“ .so
--disable-shared	æ„å»ºé™æ€åº“ .aï¼ˆäºŒé€‰ä¸€ï¼‰

```


# äº¤å‰ç¼–è¯‘ protobuf-2.6.1

```
1. å…ˆç¼–è¯‘ä¸€ä¸ª native(x86) ç‰ˆæœ¬protoc

cd protobuf-2.6.1
make distclean   # ç¡®ä¿å¹²å‡€
./configure --prefix=$PWD/host_build
make -j$(nproc)
make install


2. äº¤å‰ç¼–è¯‘

make distclean
export TOOLCHAIN=/root/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin

export CC=$TOOLCHAIN/aarch64-none-linux-gnu-gcc
export CXX=$TOOLCHAIN/aarch64-none-linux-gnu-g++
export AR=$TOOLCHAIN/aarch64-none-linux-gnu-ar
export LD=$TOOLCHAIN/aarch64-none-linux-gnu-ld
export RANLIB=$TOOLCHAIN/aarch64-none-linux-gnu-ranlib
export STRIP=$TOOLCHAIN/aarch64-none-linux-gnu-strip

./configure --host=aarch64-none-linux-gnu --prefix=$PWD/aarch64_install \
    --with-protoc=$PWD/host_build/bin/protoc  \
    CFLAGS="-fPIC" CXXFLAGS="-fPIC"
make -j$(nproc)
make install



```